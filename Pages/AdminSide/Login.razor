@page "/admin/login"

<PageTitle>Login</PageTitle>

<div class="w-full">

     @if (@msg != "")
            {
                <div class="w-full  mx-auto relative top-1 flex justify-center">
                    <div class="absolute w-1/4 bg-yellow-400 py-3 border-b-4 border-yellow-600 ">
                    <div class="flex justify-center items-center">
                                                <h1 class="text-center text-black font-semibold">@msg</h1>

                                                <button @onclick="message" class="ml-5 bg-red-500 rounded-full w-5 hover:rotate-45 transition duration-500"><svg class="fill-current h-5 text-white hover:rotate-45 transition duration-500 "xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg></button>

                    </div>

                    </div>
                </div>
            }

      <div class="bg-white mx-auto rounded-2xl border shadow-x1 p-10 max-w-lg shadow-lg hover:shadow-2xl transition duration-300 mt-24 ">
        <div class="flex flex-col items-center space-y-4">
          <h1 class="font-bold text-2xl text-gray-700 w-4/6 text-center">
            Sign In
          </h1><svg class="h-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M377.7 338.8l37.15-92.87C419 235.4 411.3 224 399.1 224h-57.48C348.5 209.2 352 193 352 176c0-4.117-.8359-8.057-1.217-12.08C390.7 155.1 416 142.3 416 128c0-16.08-31.75-30.28-80.31-38.99C323.8 45.15 304.9 0 277.4 0c-10.38 0-19.62 4.5-27.38 10.5c-15.25 11.88-36.75 11.88-52 0C190.3 4.5 181.1 0 170.7 0C143.2 0 124.4 45.16 112.5 88.98C63.83 97.68 32 111.9 32 128c0 14.34 25.31 27.13 65.22 35.92C96.84 167.9 96 171.9 96 176C96 193 99.47 209.2 105.5 224H48.02C36.7 224 28.96 235.4 33.16 245.9l37.15 92.87C27.87 370.4 0 420.4 0 477.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 420.4 420.1 370.4 377.7 338.8zM176 479.1L128 288l64 32l16 32L176 479.1zM271.1 479.1L240 352l16-32l64-32L271.1 479.1zM320 186C320 207 302.8 224 281.6 224h-12.33c-16.46 0-30.29-10.39-35.63-24.99C232.1 194.9 228.4 192 224 192S215.9 194.9 214.4 199C209 213.6 195.2 224 178.8 224h-12.33C145.2 224 128 207 128 186V169.5C156.3 173.6 188.1 176 224 176s67.74-2.383 96-6.473V186z"/></svg>
          <input
            type="text"
            @bind="username"
            placeholder="Nombre de usuario"
            class="border-2 rounded-lg w-full h-12 px-4 outline-none"
          />
                    <input
            type="text"
            @bind="password"
            placeholder="Contrasena"
            class="border-2 rounded-lg w-full h-12 px-4 outline-none"
          />
          <button
            class="bg-red-400 text-white rounded-md hover:bg-red-500 font-semibold px-4 py-3 w-full border-4 border-transparent hover:border-red-500 transition duration-300 text-xl"
          @onclick="SignIn">
            Sign In
          </button>
        </div>
      </div>
            
</div>
            

@code {
    private string username;
    private string password;
    private string msg="";
    private string validationText = "hidden";

void message(){
    msg="";
}
    private void SignIn()
    {
        if(username == null || password == null)
        {
            msg="Favor llenar todos los campos";
            return;
        }else{
        MyDBContext context = new MyDBContext();
        var user = context.Users.Where(u => u.username == this.username).Where(u => u.pwd == this.password);
        var validated = user.Count();
        if (validated > 0)
        {
            Console.WriteLine($"sign in successfull... {user}");
        }
        else
        {
            //Console.WriteLine("Sign In failed...");
            this.msg = "Username or Password are not correct";
        }
        }

    }
}